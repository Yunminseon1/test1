# ğŸ—¨ï¸ Talk_Service  
ìµëª… ê¸°ë°˜ ì±„íŒ… ì„œë¹„ìŠ¤ DB í”„ë¡œì íŠ¸

---

# 1. ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš” (Overview)

<img width="600" height="800" alt="Image" src="https://github.com/user-attachments/assets/3d04becb-fc56-440f-8e69-ad3d986c08d5" />




**Talk_Service**ëŠ” ì‚¬ìš©ìë“¤ì´ ìµëª…ìœ¼ë¡œ ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” ì•ˆì „í•œ ì±„íŒ… í™˜ê²½ì„ ì œê³µí•˜ê¸° ìœ„í•œ  
**DB ì¤‘ì‹¬ì˜ ì±„íŒ… ì„œë¹„ìŠ¤ ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤.

ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¨ìˆœ ì±„íŒ…ì„ ë„˜ì–´  
**ê¸ˆì¹™ì–´ í•„í„°ë§, ì‹ ê³ /ì œì¬, ì•Œë¦¼, ìë™ ë¡œê·¸ ìƒì„± í”„ë¡œì‹œì €ê¹Œì§€ í¬í•¨í•œ í†µí•© ìš´ì˜ ì‹œìŠ¤í…œ**ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

---

# 2. ğŸ¯ í”„ë¡œì íŠ¸ ëª©ì  (Objective)

- ìµëª… ê¸°ë°˜ ì±„íŒ… ì„œë¹„ìŠ¤ì˜ í•µì‹¬ ë¡œì§ì„ DB êµ¬ì¡°ë¡œ ì™„ì „í•˜ê²Œ êµ¬í˜„
- íšŒì›, ì±„íŒ…ë°©, ë©”ì‹œì§€, ì‹ ê³ /ì œì¬, ì•Œë¦¼ ê¸°ëŠ¥ì„ í†µí•©ì ìœ¼ë¡œ ê´€ë¦¬
- í•˜ë£¨ì¹˜ ì„œë¹„ìŠ¤ ë¡œê·¸ë¥¼ ìë™ ìƒì„±í•˜ëŠ” ì‹œë®¬ë ˆì´ì…˜ í”„ë¡œì‹œì € êµ¬í˜„
- CRUD ê¸°ëŠ¥ ë° ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì¡°í™”
- DB ì„¤ê³„ í‘œì¤€(ì •ê·œí™”Â·ì°¸ì¡°ë¬´ê²°ì„±Â·ì´ë ¥ê´€ë¦¬)ì„ ë°˜ì˜í•œ ì‹¤ì „í˜• í”„ë¡œì íŠ¸ êµ¬ì¶•

---

# 3. ğŸ§© ì£¼ìš” ê¸°ëŠ¥ ìš”ì•½ (Main Features)

### ğŸ‘¤ **íšŒì› ê¸°ëŠ¥**
- ìµëª… ë‹‰ë„¤ì„ ìƒì„±, ìµœì†Œ ë¡œê·¸ì¸ ì¸ì¦
- íšŒì›ì •ë³´ ìˆ˜ì •
- í™œì„±/ë¹„í™œì„± ì²˜ë¦¬, ì œì¬ ì—¬ë¶€ ê´€ë¦¬

### ğŸ’¬ **ì±„íŒ… ê¸°ëŠ¥**
- ì±„íŒ…ë°© ìƒì„± / ì¢…ë£Œ
- ì°¸ì—¬ì ì…ì¥ / í‡´ì¥ / ê°•í‡´
- ë©”ì‹œì§€ ì „ì†¡ / ì‚­ì œ
- ë©”ì‹œì§€ ì½ìŒ ì²˜ë¦¬ ë° ì¹´ìš´íŠ¸ ì¦ê°€

### ğŸ”¥ **ìš´ì˜ ê¸°ëŠ¥**
- ê¸ˆì¹™ì–´ ë“±ë¡Â·ì¡°íšŒÂ·ê²€ì‚¬  
- ê¸ˆì¹™ì–´ í¬í•¨ ë©”ì‹œì§€ ìë™ ê°•í‡´  
- ë©”ì‹œì§€ ì‹ ê³  / ì‚¬ìš©ì ì‹ ê³  / ì‹ ê³  ì²˜ë¦¬

### â›” **ì œì¬ ê¸°ëŠ¥**
- ì œì¬ ë“±ë¡ ë° ì œì¬ ê¸°ê°„ ê´€ë¦¬  
- ì‚¬ìš©ì ìƒíƒœ ì¡°íšŒ(ì •ìƒ / ì œì¬ ì¤‘)

### ğŸ”” **ì•Œë¦¼ ê¸°ëŠ¥**
- ê³µì§€ ìƒì„±  
- ì‚¬ìš©ìë³„ ì•Œë¦¼ ë°œì†¡  
- ì½ìŒ ì²˜ë¦¬ / ì „ë‹¬ ì‹œê°„ ê¸°ë¡

### âš™ï¸ **ì‹œì—° í”„ë¡œì‹œì €**
- í•˜ë£¨ì¹˜ ì±„íŒ… ì„œë¹„ìŠ¤ íë¦„ì„ ìë™ìœ¼ë¡œ ìƒì„±  
(ì±„íŒ…ë°© ìƒì„± â†’ ì°¸ì—¬ â†’ ë©”ì‹œì§€ â†’ ì½ìŒ â†’ ê¸ˆì¹™ì–´ â†’ ì‹ ê³  â†’ ì œì¬)

---

# 4. ğŸ—‚ WBS (Work Breakdown Structure)
https://docs.google.com/spreadsheets/d/1QoSLlN1Hlh1HhbqGWCwALpak9ikuPs487jqbI0XQO9o/edit?gid=1961214343#gid=1961214343


# 5. ğŸ“‘ ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ (Requirements Specification)
https://docs.google.com/spreadsheets/d/1xQt-FRa4emQ58YfOVakJ1_T3ugmK7aH82Ts8HsuSz1M/edit?gid=2043864236#gid=2043864236


# 6. ğŸ§± ERD ì„¤ê³„ì„œ

> ğŸ“Œ *ì´ë¯¸ì§€ íŒŒì¼ì„ `/docs/erd.png` ê²½ë¡œì— ë„£ê³  ì•„ë˜ ë§í¬ ìœ ì§€í•˜ë©´ ìë™ í‘œì‹œë©ë‹ˆë‹¤.*
# 7. ğŸ—„ï¸ DDL & DML
#### DDL

<details>
<summary><b>í…Œì´ë¸” ìƒì„± DDL</b></summary>
	
```sql
  
  CREATE DATABASE Talk_Service;
  USE Talk_Service;

  CREATE TABLE User (
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      nickname VARCHAR(255) NOT NULL,
      join_date DATETIME NOT NULL,
      is_active BOOLEAN NOT NULL,
      role VARCHAR(255) NOT NULL,
      user_id VARCHAR(255) NOT NULL,
      user_password VARCHAR(255) NOT NULL,
      user_name VARCHAR(255) NOT NULL,
      phonenumber VARCHAR(255) NOT NULL,
      email VARCHAR(255) NOT NULL UNIQUE
  );

  CREATE TABLE ChatRoom (
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      m_user_id BIGINT NOT NULL,
      status VARCHAR(255) NOT NULL,
      start_time DATETIME NOT NULL,
      end_time DATETIME,
      topic VARCHAR(255) NOT NULL,
      FOREIGN KEY (m_user_id) REFERENCES User(id)
  );

  CREATE TABLE RoomParticipant (
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      room_id BIGINT NOT NULL,
      user_id BIGINT NOT NULL,
      join_time DATETIME NOT NULL,
      leave_time DATETIME NULL,
      is_out BOOLEAN NOT NULL,
      FOREIGN KEY (room_id) REFERENCES ChatRoom(id),
      FOREIGN KEY (user_id) REFERENCES User(id)
  );

  CREATE TABLE ChatMessage (
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      room_id BIGINT NOT NULL,
      content VARCHAR(255) NOT NULL,
      send_time DATETIME NOT NULL,
      is_deleted BOOLEAN NOT NULL,
      count BIGINT NOT NULL,
      FOREIGN KEY (room_id) REFERENCES ChatRoom(id)
  );

  CREATE TABLE MessageRead (
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      message_id BIGINT NOT NULL,
      user_id BIGINT NOT NULL,
      is_read BOOLEAN NOT NULL,
      FOREIGN KEY (message_id) REFERENCES ChatMessage(id),
      FOREIGN KEY (user_id) REFERENCES User(id)
  );

  CREATE TABLE Forbidden_words(
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      chat_room_id BIGINT NOT NULL,
      forbidden_word VARCHAR(255) NOT NULL,
      FOREIGN KEY (chat_room_id) REFERENCES ChatRoom(id)
  );

  CREATE TABLE Report (
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      reporter_user_id BIGINT NOT NULL,
      chat_message_id BIGINT NOT NULL,
      reported_object_id BIGINT NOT NULL,
      reason VARCHAR(255) NOT NULL,
      report_time DATETIME NOT NULL,
      process_status VARCHAR(255) NOT NULL,
      FOREIGN KEY (reporter_user_id) REFERENCES User(id),
      FOREIGN KEY (chat_message_id) REFERENCES ChatMessage(id),
      FOREIGN KEY (reported_object_id) REFERENCES User(id)
  );

  CREATE TABLE BanLog(
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      user_id BIGINT NOT NULL,
      reason VARCHAR(255) NULL,
      ban_start_time DATETIME NOT NULL,
      ban_end_time DATETIME NOT NULL,
      FOREIGN KEY (user_id) REFERENCES User(id)
  );

  CREATE TABLE Notification (
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      title VARCHAR(255) NULL,
      content VARCHAR(3000) NOT NULL,
      created_time DATETIME NOT NULL
  );

  CREATE TABLE NotificationUser (
      id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      notification_id BIGINT NOT NULL,
      user_id BIGINT NOT NULL,
      is_read BOOLEAN NOT NULL,
      read_time DATETIME NOT NULL,
      delivered_time DATETIME NOT NULL,
      FOREIGN KEY (notification_id) REFERENCES Notification(id),
      FOREIGN KEY (user_id) REFERENCES User(id)
  );
 


  ```
</details>

</div>
</details>

<hr>

#### DML

<details>
<summary><b>í…ŒìŠ¤íŠ¸ ë°ì´í„° ì…ë ¥ DML</b></summary>
	
```sql
-- ê´€ë¦¬ì, ìœ ì € ë“±ë¡
INSERT INTO User(nickname, join_date, is_active, role, user_id, user_password, user_name, phonenumber, email)
VALUES 
('ê´€ë¦¬ì', NOW(), TRUE, 'ADMIN', 'admin01', '1234', 'ê´€ë¦¬ìí™', '010-1111-1111', 'admin@test.com'),
('ìµëª…1', NOW(), TRUE, 'USER', 'user01', '1234', 'í™ê¸¸ë™', '010-2222-2222', 'user01@test.com'),
('ìµëª…2', NOW(), TRUE, 'USER', 'user02', '1234', 'ê¹€ì² ìˆ˜', '010-3333-3333', 'user02@test.com'),
('ìµëª…3', NOW(), TRUE, 'USER', 'user03', '1234', 'ì´ì˜í¬', '010-4444-4444', 'user03@test.com');

--í”„ë¡œì‹œì €: ì±„íŒ…ë°©/ë©”ì‹œì§€/ê°•í‡´/ì‹ ê³ /ì œì¬ ì‹œì—°
DELIMITER //
CREATE PROCEDURE simulate_chatroom_activity()
BEGIN
    DECLARE i INT DEFAULT 1;
    DECLARE j INT DEFAULT 1;

    -- 3-1. ì±„íŒ…ë°© ìƒì„±
    INSERT INTO ChatRoom(m_user_id, status, start_time, end_time, topic)
    VALUES (2, 'í™œì„±', NOW(), NULL, 'ì—°ì• '),
           (3, 'í™œì„±', NOW(), NULL, 'ì·¨ë¯¸');

    -- 3-2. ë°© ì°¸ì—¬
    INSERT INTO RoomParticipant(room_id, user_id, join_time, leave_time, is_out)
    VALUES (1, 2, NOW(), NULL, FALSE),
           (1, 3, NOW(), NULL, FALSE),
           (1, 4, NOW(), NULL, FALSE),
           (2, 3, NOW(), NULL, FALSE),
           (2, 4, NOW(), NULL, FALSE);

    -- 3-3. ë©”ì‹œì§€ ì „ì†¡ (ë°©ë‹¹ 20ê°œ)
    WHILE i <= 2 DO
        SET j = 1;
        WHILE j <= 20 DO
            INSERT INTO ChatMessage(room_id, content, send_time, is_deleted, count)
            VALUES (i, CONCAT('ë©”ì‹œì§€ ', j, ' in room ', i), NOW(), FALSE, 0);
            SET j = j + 1;
        END WHILE;
        SET i = i + 1;
    END WHILE;

    -- 3-4. ë©”ì‹œì§€ ì½ìŒ ëœë¤
    INSERT INTO MessageRead(message_id, user_id, is_read)
    SELECT id, 2 + FLOOR(RAND()*2), TRUE FROM ChatMessage;

    -- 3-5. ê¸ˆì¹™ì–´ ë“±ë¡ & ìš•ì„¤ í¬í•¨ ë©”ì‹œì§€ ê°•í‡´
    INSERT INTO Forbidden_words(chat_room_id, forbidden_word)
    VALUES (1, 'ìš•ì„¤1'), (1, 'ìš•ì„¤2');

    -- ê¸ˆì¹™ì–´ í¬í•¨ ë©”ì‹œì§€ ê°•í‡´ (ë°©ì¥ ì‹œë®¬ë ˆì´ì…˜)
    UPDATE RoomParticipant SET is_out=TRUE, leave_time=NOW()
    WHERE user_id=4 AND room_id=1;

    -- 3-6. ì‹ ê³  ìë™ ìƒì„±
    INSERT INTO Report(reporter_user_id, chat_message_id, reported_object_id, reason, report_time, process_status)
    VALUES (2, 5, 4, 'ìš•ì„¤ ì‚¬ìš©', NOW(), 'ëŒ€ê¸°ì¤‘');

    -- 3-7. ì œì¬ ê¸°ë¡ ìƒì„± (ê´€ë¦¬ì)
    INSERT INTO BanLog(user_id, reason, ban_start_time, ban_end_time)
    VALUES (4, 'ìš•ì„¤ ì‚¬ìš©ìœ¼ë¡œ ì œì¬', NOW(), DATE_ADD(NOW(), INTERVAL 1 DAY));
END //
DELIMITER ;
-- í”„ë¡œì‹œì € ì‹¤í–‰
CALL simulate_chatroom_activity();


-- íšŒì› ì¡°íšŒ
SELECT * FROM User;

-- ì±„íŒ…ë°© ì¡°íšŒ
SELECT * FROM ChatRoom;

-- ì°¸ì—¬ì ì¡°íšŒ
SELECT * FROM RoomParticipant;

-- ë©”ì‹œì§€ ì¡°íšŒ
SELECT * FROM ChatMessage;

-- ë©”ì‹œì§€ ì½ìŒ
SELECT * FROM MessageRead;

-- ê¸ˆì¹™ì–´ ì¡°íšŒ
SELECT * FROM Forbidden_words;

UPDATE Forbidden_words
SET forbidden_word = 'ìš•ì„¤ë³€ê²½'
WHERE id = 1;

UPDATE Forbidden_words
SET forbidden_word = 'ã……ã…‚'
WHERE id = 1;

UPDATE Forbidden_words
SET forbidden_word = 'ê°œìƒˆë¼'
WHERE id = 2;
-- ê¸ˆì¹™ì–´ë“±ë¡+ê°•í‡´ ë°œìƒ í›„
SELECT * FROM RoomParticipant WHERE is_out=TRUE;

-- ì‹ ê³  ì¡°íšŒ
SELECT * FROM Report;

-- ì œì¬ ì¡°íšŒ
SELECT * FROM BanLog;

-- ì•Œë¦¼ ìƒì„±
INSERT INTO Notification(title, content, created_time)
VALUES ('ê³µì§€', 'í…ŒìŠ¤íŠ¸ ê³µì§€ì…ë‹ˆë‹¤.', NOW());

-- ì•Œë¦¼ ì‚¬ìš©ì ë°œì†¡
INSERT INTO NotificationUser(notification_id, user_id, is_read, read_time, delivered_time)
VALUES (1, 2, FALSE, NOW(), NOW());

-- ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬(is_read íƒ€ì…ì„ voolean ì²˜ë¦¬ë¥¼ í•´ì„œ trueëŠ” 1, falseëŠ” 0ìœ¼ë¡œ ë‚˜ì˜´)
UPDATE NotificationUser SET is_read=TRUE, read_time=NOW() WHERE id=1;
SELECT * FROM NotificationUser WHERE id = 1;

-- ì•Œë¦¼ì¡°íšŒ
SELECT * FROM Notification; 
SELECT * FROM NotificationUser;
```
</details>

</div>
</details>

<hr/>


# 8. ğŸ¬ ì‹¤í–‰ ê²°ê³¼ ìº¡ì²˜
<details open>
  <summary><b>
</b></summary>
<img width="265" height="309" alt="001" src="https://github.com/user-attachments/assets/d65f6d9c-f6ab-4b4a-b688-dbbfb1e91b6a" />

	
<img width="806" height="240" alt="002" src="https://github.com/user-attachments/assets/d417d1df-260d-4300-b572-920eb5e59570" />


<img width="626" height="206" alt="003" src="https://github.com/user-attachments/assets/930fb553-6c6d-4376-8910-08d1fad193b3" />


<img width="578" height="194" alt="004" src="https://github.com/user-attachments/assets/8b382da6-2239-481c-ab5a-856230500ccc" />


<img width="601" height="258" alt="005" src="https://github.com/user-attachments/assets/aa243ebb-c5eb-499a-a646-4218b0a25ff2" />


<img width="453" height="219" alt="006" src="https://github.com/user-attachments/assets/a3f80bdf-54d0-4a1b-abdd-99ef1fa5c2a8" />


<img width="924" height="409" alt="007" src="https://github.com/user-attachments/assets/73518a67-8ab1-40f1-a292-7b7666be998c" />


<img width="776" height="254" alt="008" src="https://github.com/user-attachments/assets/7a061b5f-66c7-4123-9923-e9ed7c8055b0" />


</details>


